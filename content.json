{"meta":{"title":"梢_的博客","subtitle":"人恒之而远","description":"node.js,android,java,网络攻防,javascript","author":"王癸萱","url":"http://yoursite.com","root":"/"},"pages":[{"title":"分类","date":"2020-01-15T08:22:04.000Z","updated":"2020-01-15T08:40:48.331Z","comments":false,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2020-01-15T08:13:02.000Z","updated":"2020-01-15T08:40:31.999Z","comments":false,"path":"tags/index1.html","permalink":"http://yoursite.com/tags/index1.html","excerpt":"","text":""}],"posts":[{"title":"使用node.js和express自动导入路由和数据表","slug":"使用node.js和express自动导入路由和数据表","date":"2020-01-15T07:34:38.147Z","updated":"2020-01-15T07:34:38.250Z","comments":true,"path":"/blog/使用node.js和express自动导入路由和数据表.html","link":"","permalink":"http://yoursite.com/blog/%E4%BD%BF%E7%94%A8node.js%E5%92%8Cexpress%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%85%A5%E8%B7%AF%E7%94%B1%E5%92%8C%E6%95%B0%E6%8D%AE%E8%A1%A8.html","excerpt":"","text":"当我们添加一个路由时 每次都需要在app.js 去设置路由 这样比较繁琐。我们可以通过创建一个模块来 自动设置文件夹下的所以路由。在路由表文件夹下创建一个index.js通过 fs 获取文件夹下所有.js的文件 index.js除外（readdirSync方法）再获取文件的路径（forEach方法） 因为app.js里面设置的原理也是通过路径 来获取路由对象的再通过数组保存路径 1234567891011121314151617181920let fs=require(&apos;fs&apos;);let path=require(&apos;path&apos;);let apis=[];fs.readdirSync(__dirname).filter(function(filename)&#123; return (filename!==&apos;index.js&apos;)&amp;&amp;(filename.slice(-3)===&apos;.js&apos;);&#125;).forEach(function(filename)&#123; let filepath=path.join(__dirname,filename); apis.push(require(filepath))&#125;)var express=require(&apos;express&apos;);var router=express.Router();router.use(&apos;/&apos;,apis);module.exports=router; 代码如图然后在app.js里面 添加一个模块的路由就行了 以后访问就是 http://localhost:3000/apis/xxx我这里用的自己主机注意！！ url那里的apis 是和你自己设置路由的名字是一样的 不然不能访问 下面我们来试试数据库表的导入差不多 我在models 下建了table.js 模块代码如下 1234567891011121314151617181920212223242526272829let Sequlize=require(&apos;sequelize&apos;);let fs=require(&apos;fs&apos;);let path=require(&apos;path&apos;);let sequelize=new Sequlize(&quot;test&quot;,&quot;stu&quot;,&quot;Ydyykf17&quot;,&#123; host:&quot;192.168.1.52&quot;, dialect:&quot;mysql&quot;, timezone:&quot;+8:00&quot;&#125;)let db=&#123;&#125;;fs.readdirSync(__dirname).filter(function(filename)&#123; return (filename!==&apos;tables.js&apos;)&amp;&amp;(filename.slice(-3)===&apos;.js&apos;);&#125;).forEach(function(filename)&#123;let filepath=path.join(__dirname,filename);let model=sequelize.import(filepath);db[model.name]=model;&#125;)sequelize.sync();module.exports = &#123; db&#125;; 第一次写 不足之处可以支持 一起进步谢谢哦","categories":[],"tags":[]},{"title":"测试文章","slug":"墨者学院_主机溢出提权漏洞（包含工具）","date":"2020-01-15T03:28:29.057Z","updated":"2020-01-15T08:41:44.501Z","comments":true,"path":"/blog/墨者学院_主机溢出提权漏洞（包含工具）.html","link":"","permalink":"http://yoursite.com/blog/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2_%E4%B8%BB%E6%9C%BA%E6%BA%A2%E5%87%BA%E6%8F%90%E6%9D%83%E6%BC%8F%E6%B4%9E%EF%BC%88%E5%8C%85%E5%90%AB%E5%B7%A5%E5%85%B7%EF%BC%89.html","excerpt":"","text":"墨者学院之主机溢出提权漏洞分析（包含提权工具）1.启动环境 2.这里使用asp一句话木马 密码为pass3. 设置浏览器代理 这里使用了Google浏览器 4.设置好代理后打开抓包工具 Burp Suite 5.上传我们写好的木马 点go 上传 6.抓包截取数据包后 在upload下建立一个后缀为.asp的目录 修改后放行 7.这里我们看到文件已经上传到服务器了 下面我们开始联菜刀 8.链接菜刀前先把抓包拦截关闭 顺便把代理也关掉 9.打开中国菜刀 右击添加 把服务器的ip加 端口 加我们木马的存放路径（就是返回地址）10.密码是我们木马里面写的（这里是pass） 11.脚本类型选择asp 点击添加 然后链接木马 12.成功链接到到主机 在C盘根目录发现一个key_1224513461.txt的文件 但是我们没有打开权限然后我们要开始提权 13.我们在我们上传木马的目录下上传一个 cmd.exe 的终端用来执行命令下载链接 cmd.exe 14.右击cmd 点击虚拟终端首先我们先设置终端的运行路径 用setp 加cmd.exe的路径。setp C:\\Inetpub\\wwwroot\\upload\\cmd.exe 15.设置好后我们再将将提权工具上传到主机 这里使用pr.exe提权工具！！！特别注意要先设置好cmd的运行路径后才上传pr.exe提权工具 否则可能不能提权！！！ 下载链接 pr.exe 16.这里提权有两种方式：1.cd 到pr.exe 的存放目录下使用：pr.exe “ type C:\\KEY_1224513461.txt”2.直接给出pr.exe的运行路径：C:\\Inetpub\\wwwroot\\upload\\pr.exe “type C:\\KEY_1224513461”双引号里面就是要执行的命令 也可以执行其他命令这里我们看到我们成功打开了文件 最下面一行就是key谢谢阅读 希望能帮到你","categories":[],"tags":[{"name":"Testing","slug":"Testing","permalink":"http://yoursite.com/tags/Testing/"},{"name":"Another Tag","slug":"Another-Tag","permalink":"http://yoursite.com/tags/Another-Tag/"}]}]}